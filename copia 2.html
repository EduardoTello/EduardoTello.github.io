<!DOCTYPE html>
<html><head><title></title></head><body></body></html>
<script type="text/javascript">
var data= [
  {name: '100',		weight: 100,		value: 100,		pieces:10},
 // {name: '70',		weight: 70,		value: 70,		pieces:10},
  {name: '50',		weight: 50,		value: 50,		pieces:10},
  {name: '20',		weight: 20,		value: 20,		pieces:10},
  {name: '10',		weight: 10,		value: 10,		pieces:10},
  {name: '5',		weight: 5,		value: 5,		pieces:10},
  {name: '2',		weight: 2,		value: 2,		pieces:10},
  {name: '1',		weight: 1,		value: 1,		pieces:10}
];
var cant = 28;
 
function findBestPack() {
	// Inicializamos variables
	var m= [[0]]; 														// maximum pack value found so far
	var b= [[0]]; 														// best combination found so far
	var opts= [0]; 														// item index for 0 of item 0 
	var P= [1]; 														// item encoding for 0 of item 0
	var choose= 0;
	
	// Se iniciclizan Valores para control 
	for (var j= 0; j<data.length; j++) {
		opts[j+1]= opts[j]+data[j].pieces; 								// item index for 0 of item j+1
		P[j+1]= P[j]*(1+data[j].pieces); 								// item encoding for 0 of item j+1
	}


	// Se inicializan los valores para cuando se tiene 0 de cada Item
	for (var j= 0; j<opts[data.length]; j++) {
		m[0][j+1]= b[0][j+1]= 0; 										// best values and combos for empty pack: nothing
	}


	var out2= "";														// variable para monitoreo

	// Vamos a intentar para cada una de las cantidades posibles
	for (var w=1; w<=cant; w++) {
		m[w]= [0];
		b[w]= [0];
		
		// Para cada una de las denominaciones de moneda
		for (var j=0; j<data.length; j++) {
			var N= data[j].pieces; 										// how many of these can we have?
			var base= opts[j]; 											// what is the item index for 0 of these?
			
			// Aqui estaríamos recorriendo normalemente la matriz pero como tenemos varaias monedas de cada una, tenemos que ver la combinación que mejor nos funcione


			// Para cada una de las cantidades de cada moneda
			for (var n= 1; n<=N; n++) {
				var W= n*data[j].weight; 								// how much do these items weigh?
				var s= w>=W ?1 :0; 										// can we carry this many?
				var v= s*n*data[j].value; 								// how much are they worth?
				var I= base+n; 											// what is the item number for this many?
				var wN= w-s*W; 											// how much other stuff can we be carrying?
				var C= n*P[j] + b[wN][base]; 							// encoded combination
				m[w][I]= Math.max(m[w][I-1], v+m[wN][base]); 			// best value
				choose= b[w][I]= m[w][I]>m[w][I-1] ?C :b[w][I-1];
			}
		}
		out2 += '<p>';
		out2 += m[w];
		out2 += '</br>';
		out2 += b[w];
		out2 += '</p>';
	}
	var best= [];
	for (var j= data.length-1; j>=0; j--) {
		best[j]= Math.floor(choose/P[j]);
		choose-= best[j]*P[j];
	}
	var out='<table><tr><td><b>Count</b></td><td><b>Item</b></td><th>unit weight</th><th>unit value</th>';
	var wgt= 0;
	var val= 0;
	for (var i= 0; i<best.length; i++) {
		if (0==best[i]) continue;
		out+='</tr><tr><td>'+best[i]+'</td><td>'+data[i].name+'</td><td>'+data[i].weight+'</td><td>'+data[i].value+'</td>'
		wgt+= best[i]*data[i].weight;
		val+= best[i]*data[i].value;
	}
	out+= '</tr></table><br/>Total weight: '+wgt;
	out+= '<br/>Total value: '+val;
	out+= out2;
	document.body.innerHTML= out;
}
findBestPack();
</script>